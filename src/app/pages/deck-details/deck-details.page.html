<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button (click)="goBack()"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalles del Deck</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Spinner de carga -->
  @if (isLoading) {
    <div class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Cargando deck...</p>
    </div>
  } @else if (deck) {
    <!-- Header del Deck -->
    <div class="deck-header">
      <!-- Imagen del Líder -->
      <div class="leader-image-container">
        @if (deck.leaderImage) {
          <img [src]="deck.leaderImage" alt="{{ deck.leaderName }}" class="leader-image">
        } @else {
          <div style="width: 100%; height: 300px; display: flex; align-items: center; justify-content: center; color: #999;">
            Sin imagen disponible
          </div>
        }
      </div>

      <!-- Información del Deck -->
      <div class="deck-info">
        <h1 class="deck-name">{{ deck.deckName }}</h1>
        <p class="deck-description">{{ deck.description || 'Sin descripción' }}</p>

        <div class="deck-meta">
          <ion-chip>
            <ion-label>
              <strong>Líder:</strong> {{ deck.leaderName }}
            </ion-label>
          </ion-chip>
          <ion-chip>
            <ion-label>
              <strong>Cartas:</strong> {{ getTotalCards() }}/{{ 50 }}
            </ion-label>
          </ion-chip>
        </div>
      </div>
    </div>

    <!-- Lista de Cartas -->
    <div class="cards-section">
      <h2>Cartas en la Baraja</h2>

      <div class="cards-grid">
        @for (card of cards; track card.id) {
          <div class="card-item">
            <div class="card-image-wrapper">
              <img [src]="card.images.large" alt="{{ card.name }}" class="card-image">
              <div class="card-count-badge">{{ card.count }}</div>
            </div>
            <div class="card-info">
              <h3>{{ card.name }}</h3>
              <p class="card-code">{{ card.code }}</p>
              @if (card.rarity) {
                <p class="card-rarity">Rareza: {{ card.rarity }}</p>
              }
              @if (card.power) {
                <p class="card-power">Poder: {{ card.power }}</p>
              }
            </div>
          </div>
        }
      </div>
    </div>
  } @else {
    <!-- Deck no encontrado -->
    <div class="empty-state">
      <ion-icon name="alert-circle"></ion-icon>
      <p>No se encontró el deck</p>
      <ion-button (click)="goBack()" color="primary">Volver</ion-button>
    </div>
  }
</ion-content>
